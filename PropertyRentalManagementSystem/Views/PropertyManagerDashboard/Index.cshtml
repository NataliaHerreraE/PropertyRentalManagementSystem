@{
    ViewBag.Title = "Property Manager Dashboard";
}

<h2 class="dashboard-title">Property Manager Dashboard</h2>

<p class="welcome-text">
    WELCOME @ViewBag.UserName
</p>

<p class="instruction-text">
    Select an option below to manage buildings, apartments, appointments, messages, payments, rental agreements.
</p>

<div class="container">
    <div class="row text-center mt-4">
        <!-- Total Buildings -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>Total Buildings</h3>
                <h2>@ViewBag.BuildingCount</h2>

            </div>
            <a href="@Url.Action("Index", "Buildings")" class="btn btn-dark mt-2">Manage Buildings</a>
        </div>

        <!-- Total Apartments -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>Total Apartments</h3>
                <h2>@ViewBag.ApartmentCount</h2>

            </div>
            <a href="@Url.Action("Index", "Apartments")" class="btn btn-dark mt-2">Manage Apartments</a>
        </div>

        <!-- Upcoming Appointments (Pending) -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>Pending Appointments</h3>
                <h2>@ViewBag.UpcomingAppointmentsCount</h2>
            </div>
            <a href="@Url.Action("Index", "Appointments")" class="btn btn-dark mt-2">Manage Appointments</a>
        </div>

        <!-- New Messages -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>New Messages</h3>
                <h2>@ViewBag.UnreadMessagesCount</h2> <!-- Display the unread message count -->
            </div>
            <a href="@Url.Action("Index", "Messages")" class="btn btn-dark mt-2">Manage Messages</a>
        </div>

        <!-- Total Payments -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>Total Payments</h3>
                <h2>@ViewBag.TotalPayments</h2>
            </div>
            <a href="@Url.Action("Index", "Payments")" class="btn btn-dark mt-2">Manage Payments</a>
        </div>


        <!-- Total Rental Agreements -->
        <div class="col-md-3 mb-4">
            <div class="dashboard-card">
                <h3>Total Rental Agreements</h3>
                <h2>@ViewBag.RentalAgreementsCount</h2>
            </div>
            <a href="@Url.Action("Index", "RentalAgreements")" class="btn btn-dark mt-2">Manage Agreements</a>
        </div>



    </div>
</div>

@*
<script>
    $(document).ready(function() {
        $.ajax({
            url: '@Url.Action("GetUnreadMessagesCount", "PropertyManagerDashboard")',
            type: 'GET',
            success: function(data) {
                $('#unreadMessagesCount').text(data.count);
            },
            error: function() {
                console.error("Failed to fetch unread messages count.");
            }
        });
    });
</script>*@


